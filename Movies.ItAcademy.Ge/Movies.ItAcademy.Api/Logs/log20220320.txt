2022-03-20 19:04:44.723 +04:00 [DBG] Hosting starting
2022-03-20 19:04:45.275 +04:00 [DBG] Failed to locate the development https certificate at 'null'.
2022-03-20 19:04:45.387 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-03-20 19:04:45.440 +04:00 [INF] Now listening on: https://localhost:5001
2022-03-20 19:04:45.442 +04:00 [INF] Now listening on: http://localhost:5000
2022-03-20 19:04:45.444 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 19:04:45.445 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 19:04:45.447 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 19:04:45.449 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 19:04:45.450 +04:00 [INF] Hosting environment: Development
2022-03-20 19:04:45.451 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 19:04:45.452 +04:00 [DBG] Hosting started
2022-03-20 19:04:45.897 +04:00 [DBG] Connection id "0HMGAGBS9CCE6" received FIN.
2022-03-20 19:04:45.898 +04:00 [DBG] Connection id "0HMGAGBS9CCE7" received FIN.
2022-03-20 19:04:45.930 +04:00 [DBG] Connection id "0HMGAGBS9CCE6" accepted.
2022-03-20 19:04:45.930 +04:00 [DBG] Connection id "0HMGAGBS9CCE7" accepted.
2022-03-20 19:04:45.933 +04:00 [DBG] Connection id "0HMGAGBS9CCE6" started.
2022-03-20 19:04:45.934 +04:00 [DBG] Connection id "0HMGAGBS9CCE7" started.
2022-03-20 19:04:46.262 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:04:46.347 +04:00 [DBG] Connection id "0HMGAGBS9CCE8" accepted.
2022-03-20 19:04:46.262 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:04:46.429 +04:00 [DBG] Connection id "0HMGAGBS9CCE8" started.
2022-03-20 19:04:46.430 +04:00 [DBG] Connection id "0HMGAGBS9CCE9" accepted.
2022-03-20 19:04:46.434 +04:00 [DBG] Connection id "0HMGAGBS9CCE7" stopped.
2022-03-20 19:04:46.523 +04:00 [DBG] Connection id "0HMGAGBS9CCE9" started.
2022-03-20 19:04:46.539 +04:00 [DBG] Connection id "0HMGAGBS9CCE7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:04:46.512 +04:00 [DBG] Connection id "0HMGAGBS9CCE6" stopped.
2022-03-20 19:04:46.559 +04:00 [DBG] Connection id "0HMGAGBS9CCE6" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:04:46.589 +04:00 [DBG] Connection id "0HMGAGBS9CCE8" received FIN.
2022-03-20 19:04:46.615 +04:00 [DBG] Connection id "0HMGAGBS9CCE8" is closed. The last processed stream ID was 0.
2022-03-20 19:04:46.617 +04:00 [DBG] Connection id "0HMGAGBS9CCE8" sending FIN because: "The client closed the connection."
2022-03-20 19:04:46.624 +04:00 [DBG] Connection id "0HMGAGBS9CCE8" stopped.
2022-03-20 19:04:46.669 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger  
2022-03-20 19:04:46.713 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 19:04:46.744 +04:00 [INF] Request finished in 78.7129ms 301 
2022-03-20 19:04:46.765 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2022-03-20 19:04:46.800 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:04:46.913 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:04:46.914 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js  
2022-03-20 19:04:46.913 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css  
2022-03-20 19:04:46.921 +04:00 [INF] Request finished in 155.1203ms 200 text/html;charset=utf-8
2022-03-20 19:04:46.915 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js  
2022-03-20 19:04:46.918 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:04:46.933 +04:00 [INF] Request finished in 15.5453ms 200 application/javascript; charset=utf-8
2022-03-20 19:04:46.994 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 19:04:46.994 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-03-20 19:04:47.001 +04:00 [INF] Request finished in 87.6961ms 200 text/css
2022-03-20 19:04:47.005 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-03-20 19:04:47.007 +04:00 [INF] Request finished in 92.1263ms 200 application/javascript
2022-03-20 19:04:47.007 +04:00 [INF] Request finished in 93.618ms 200 application/javascript
2022-03-20 19:04:47.223 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png  
2022-03-20 19:04:47.227 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 19:04:47.231 +04:00 [INF] Request finished in 7.6237ms 200 image/png
2022-03-20 19:04:47.431 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2022-03-20 19:04:47.559 +04:00 [INF] Request finished in 127.941ms 200 application/json;charset=utf-8
2022-03-20 19:05:00.657 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Movie/1  
2022-03-20 19:05:00.660 +04:00 [DBG] The request path  does not match the path filter
2022-03-20 19:05:00.711 +04:00 [DBG] 1 candidate(s) found for the request path '/Movie/1'
2022-03-20 19:05:00.720 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)' with route pattern 'Movie/{Id}' is valid for the request path '/Movie/1'
2022-03-20 19:05:00.724 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:05:00.732 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:05:00.746 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 19:05:00.808 +04:00 [INF] Route matched with {action = "GetMovieById", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Movies.ItAcademy.Api.Models.DTO.MovieDTO]] GetMovieById(Int32) on controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api).
2022-03-20 19:05:00.811 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 19:05:00.813 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 19:05:00.816 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 19:05:00.818 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 19:05:00.820 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 19:05:00.824 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:05:01.016 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 19:05:01.809 +04:00 [DBG] The property 'MovieId.Ticket' was created in shadow state because there are no eligible CLR members with a matching name.
2022-03-20 19:05:02.025 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 19:05:02.030 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:05:02.071 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:05:02.077 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' using the name 'Id' in request data ...
2022-03-20 19:05:02.079 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:05:02.081 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:05:02.083 +04:00 [DBG] Attempting to validate the bound parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:05:02.089 +04:00 [DBG] Done attempting to validate the bound parameter 'Id' of type 'System.Int32'.
2022-03-20 19:05:20.846 +04:00 [DBG] Compiling query expression: 
'DbSet<Movie>()
    .Where(x => x.IsActive == True)
    .Include(x => x.Tickets)
    .SingleOrDefault(x => x.Id == __Id_0)'
2022-03-20 19:05:20.906 +04:00 [DBG] Including navigation: 'Movie.Tickets'.
2022-03-20 19:05:21.197 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Movie>(
    asyncEnumerable: new SingleQueryingEnumerable<Movie>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
            SELECT t.Id, t.Actors, t.Director, t.Duration, t.Genre, t.ImageUrl, t.IsActive, t.Name, t.StartTime, t.Story, t0.Id, t0.IsAcquired, t0.IsBooked, t0.IsCanceled, t0.MovieId
            FROM Projection Mapping:
            (
                SELECT TOP(2) m.Id, m.Actors, m.Director, m.Duration, m.Genre, m.ImageUrl, m.IsActive, m.Name, m.StartTime, m.Story
                FROM Movies AS m
                WHERE (m.IsActive == CAST(1 AS bit)) && (m.Id == @__Id_0)
            ) AS t
            LEFT JOIN Ticket AS t0 ON t.Id == t0.MovieId
            ORDER BY t.Id ASC, t0.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movie>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 19:05:21.251 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 19:05:21.286 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (35ms).
2022-03-20 19:05:21.330 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:05:21.921 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:05:21.937 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE ([m].[IsActive] = CAST(1 AS bit)) AND ([m].[Id] = @__Id_0)
) AS [t]
LEFT JOIN [Ticket] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:05:22.008 +04:00 [INF] Executed DbCommand (74ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE ([m].[IsActive] = CAST(1 AS bit)) AND ([m].[Id] = @__Id_0)
) AS [t]
LEFT JOIN [Ticket] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:05:22.063 +04:00 [DBG] Context 'MovieContext' started tracking 'Movie' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:05:22.132 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:05:22.174 +04:00 [DBG] A data reader was disposed.
2022-03-20 19:05:22.182 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:05:22.192 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:11:50.066 +04:00 [DBG] Hosting starting
2022-03-20 19:11:50.508 +04:00 [DBG] Failed to locate the development https certificate at 'null'.
2022-03-20 19:11:50.612 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-03-20 19:11:50.663 +04:00 [INF] Now listening on: https://localhost:5001
2022-03-20 19:11:50.665 +04:00 [INF] Now listening on: http://localhost:5000
2022-03-20 19:11:50.666 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 19:11:50.668 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 19:11:50.671 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 19:11:50.672 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 19:11:50.674 +04:00 [INF] Hosting environment: Development
2022-03-20 19:11:50.675 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 19:11:50.676 +04:00 [DBG] Hosting started
2022-03-20 19:11:51.142 +04:00 [DBG] Connection id "0HMGAGFR0PPTS" accepted.
2022-03-20 19:11:51.142 +04:00 [DBG] Connection id "0HMGAGFR0PPTR" accepted.
2022-03-20 19:11:51.146 +04:00 [DBG] Connection id "0HMGAGFR0PPTS" started.
2022-03-20 19:11:51.150 +04:00 [DBG] Connection id "0HMGAGFR0PPTR" started.
2022-03-20 19:11:51.161 +04:00 [DBG] Connection id "0HMGAGFR0PPTR" received FIN.
2022-03-20 19:11:51.161 +04:00 [DBG] Connection id "0HMGAGFR0PPTS" received FIN.
2022-03-20 19:11:51.465 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:11:51.465 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:11:51.519 +04:00 [DBG] Connection id "0HMGAGFR0PPTT" accepted.
2022-03-20 19:11:51.573 +04:00 [DBG] Connection id "0HMGAGFR0PPTS" stopped.
2022-03-20 19:11:51.620 +04:00 [DBG] Connection id "0HMGAGFR0PPTT" started.
2022-03-20 19:11:51.618 +04:00 [DBG] Connection id "0HMGAGFR0PPTR" stopped.
2022-03-20 19:11:51.624 +04:00 [DBG] Connection id "0HMGAGFR0PPTS" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:11:51.627 +04:00 [DBG] Connection id "0HMGAGFR0PPTR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:11:51.752 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2022-03-20 19:11:51.800 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 19:11:51.854 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:11:51.965 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:11:51.973 +04:00 [INF] Request finished in 223.7004ms 200 text/html;charset=utf-8
2022-03-20 19:11:52.065 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:11:52.069 +04:00 [INF] Request finished in 4.1362ms 200 application/javascript; charset=utf-8
2022-03-20 19:11:52.547 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2022-03-20 19:11:52.665 +04:00 [INF] Request finished in 117.8045ms 200 application/json;charset=utf-8
2022-03-20 19:12:08.076 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Movie/1  
2022-03-20 19:12:08.083 +04:00 [DBG] The request path  does not match the path filter
2022-03-20 19:12:08.130 +04:00 [DBG] 1 candidate(s) found for the request path '/Movie/1'
2022-03-20 19:12:08.139 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)' with route pattern 'Movie/{Id}' is valid for the request path '/Movie/1'
2022-03-20 19:12:08.143 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:12:08.152 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:12:08.170 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 19:12:08.241 +04:00 [INF] Route matched with {action = "GetMovieById", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Movies.ItAcademy.Api.Models.DTO.MovieDTO]] GetMovieById(Int32) on controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api).
2022-03-20 19:12:08.247 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 19:12:08.249 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 19:12:08.251 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 19:12:08.254 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 19:12:08.255 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 19:12:08.259 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:12:08.456 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 19:12:09.230 +04:00 [DBG] The property 'MovieId.Ticket' was created in shadow state because there are no eligible CLR members with a matching name.
2022-03-20 19:12:09.406 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 19:12:09.410 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:12:09.431 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:12:09.436 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' using the name 'Id' in request data ...
2022-03-20 19:12:09.438 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:12:09.440 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:12:09.443 +04:00 [DBG] Attempting to validate the bound parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:12:09.449 +04:00 [DBG] Done attempting to validate the bound parameter 'Id' of type 'System.Int32'.
2022-03-20 19:12:15.508 +04:00 [DBG] Compiling query expression: 
'DbSet<Movie>()
    .Where(x => x.IsActive == True)
    .Include(x => x.Tickets)
    .SingleOrDefault(x => x.Id == __Id_0)'
2022-03-20 19:12:15.567 +04:00 [DBG] Including navigation: 'Movie.Tickets'.
2022-03-20 19:12:15.866 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Movie>(
    asyncEnumerable: new SingleQueryingEnumerable<Movie>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
            SELECT t.Id, t.Actors, t.Director, t.Duration, t.Genre, t.ImageUrl, t.IsActive, t.Name, t.StartTime, t.Story, t0.Id, t0.IsAcquired, t0.IsBooked, t0.IsCanceled, t0.MovieId
            FROM Projection Mapping:
            (
                SELECT TOP(2) m.Id, m.Actors, m.Director, m.Duration, m.Genre, m.ImageUrl, m.IsActive, m.Name, m.StartTime, m.Story
                FROM Movies AS m
                WHERE (m.IsActive == CAST(1 AS bit)) && (m.Id == @__Id_0)
            ) AS t
            LEFT JOIN Ticket AS t0 ON t.Id == t0.MovieId
            ORDER BY t.Id ASC, t0.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movie>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 19:12:15.928 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 19:12:15.968 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (33ms).
2022-03-20 19:12:16.006 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:12:16.481 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:12:16.498 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE ([m].[IsActive] = CAST(1 AS bit)) AND ([m].[Id] = @__Id_0)
) AS [t]
LEFT JOIN [Ticket] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:12:16.572 +04:00 [INF] Executed DbCommand (80ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE ([m].[IsActive] = CAST(1 AS bit)) AND ([m].[Id] = @__Id_0)
) AS [t]
LEFT JOIN [Ticket] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:12:16.628 +04:00 [DBG] Context 'MovieContext' started tracking 'Movie' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:12:16.707 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:12:16.748 +04:00 [DBG] A data reader was disposed.
2022-03-20 19:12:16.753 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:12:16.762 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:16:25.227 +04:00 [DBG] Hosting starting
2022-03-20 19:16:25.716 +04:00 [DBG] Failed to locate the development https certificate at 'null'.
2022-03-20 19:16:25.831 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-03-20 19:16:25.893 +04:00 [INF] Now listening on: https://localhost:5001
2022-03-20 19:16:25.901 +04:00 [INF] Now listening on: http://localhost:5000
2022-03-20 19:16:25.903 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 19:16:25.905 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 19:16:25.909 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 19:16:25.911 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 19:16:25.913 +04:00 [INF] Hosting environment: Development
2022-03-20 19:16:25.914 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 19:16:25.916 +04:00 [DBG] Hosting started
2022-03-20 19:16:26.290 +04:00 [DBG] Connection id "0HMGAGID0M157" accepted.
2022-03-20 19:16:26.290 +04:00 [DBG] Connection id "0HMGAGID0M158" accepted.
2022-03-20 19:16:26.347 +04:00 [DBG] Connection id "0HMGAGID0M157" started.
2022-03-20 19:16:26.347 +04:00 [DBG] Connection id "0HMGAGID0M158" started.
2022-03-20 19:16:26.348 +04:00 [DBG] Connection id "0HMGAGID0M157" received FIN.
2022-03-20 19:16:26.348 +04:00 [DBG] Connection id "0HMGAGID0M158" received FIN.
2022-03-20 19:16:26.653 +04:00 [DBG] Connection id "0HMGAGID0M159" accepted.
2022-03-20 19:16:26.651 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:16:26.656 +04:00 [DBG] Connection id "0HMGAGID0M159" started.
2022-03-20 19:16:26.651 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:16:26.769 +04:00 [DBG] Connection id "0HMGAGID0M158" stopped.
2022-03-20 19:16:26.821 +04:00 [DBG] Connection id "0HMGAGID0M157" stopped.
2022-03-20 19:16:26.824 +04:00 [DBG] Connection id "0HMGAGID0M158" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:16:26.825 +04:00 [DBG] Connection id "0HMGAGID0M157" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:16:26.905 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2022-03-20 19:16:26.954 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 19:16:27.004 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:16:27.111 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:16:27.121 +04:00 [INF] Request finished in 219.9832ms 200 text/html;charset=utf-8
2022-03-20 19:16:27.198 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:16:27.204 +04:00 [INF] Request finished in 6.072ms 200 application/javascript; charset=utf-8
2022-03-20 19:16:27.534 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2022-03-20 19:16:27.658 +04:00 [INF] Request finished in 124.7235ms 200 application/json;charset=utf-8
2022-03-20 19:16:37.828 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Movie/1  
2022-03-20 19:16:37.834 +04:00 [DBG] The request path  does not match the path filter
2022-03-20 19:16:37.882 +04:00 [DBG] 1 candidate(s) found for the request path '/Movie/1'
2022-03-20 19:16:37.894 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)' with route pattern 'Movie/{Id}' is valid for the request path '/Movie/1'
2022-03-20 19:16:37.898 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:16:37.906 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:16:37.922 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 19:16:37.982 +04:00 [INF] Route matched with {action = "GetMovieById", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Movies.ItAcademy.Api.Models.DTO.MovieDTO]] GetMovieById(Int32) on controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api).
2022-03-20 19:16:37.986 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 19:16:37.988 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 19:16:37.990 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 19:16:37.993 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 19:16:37.994 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 19:16:37.998 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:16:38.193 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 19:16:38.984 +04:00 [DBG] The property 'MovieId.Ticket' was created in shadow state because there are no eligible CLR members with a matching name.
2022-03-20 19:16:39.182 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 19:16:39.198 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:16:39.223 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:16:39.228 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' using the name 'Id' in request data ...
2022-03-20 19:16:39.230 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:16:39.232 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:16:39.234 +04:00 [DBG] Attempting to validate the bound parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:16:39.239 +04:00 [DBG] Done attempting to validate the bound parameter 'Id' of type 'System.Int32'.
2022-03-20 19:16:46.026 +04:00 [DBG] Compiling query expression: 
'DbSet<Movie>()
    .Where(x => x.IsActive == True)
    .Include(x => x.Tickets)
    .SingleOrDefault(x => x.Id == __Id_0)'
2022-03-20 19:16:46.098 +04:00 [DBG] Including navigation: 'Movie.Tickets'.
2022-03-20 19:16:46.381 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Movie>(
    asyncEnumerable: new SingleQueryingEnumerable<Movie>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
            SELECT t.Id, t.Actors, t.Director, t.Duration, t.Genre, t.ImageUrl, t.IsActive, t.Name, t.StartTime, t.Story, t0.Id, t0.IsAcquired, t0.IsBooked, t0.IsCanceled, t0.MovieId
            FROM Projection Mapping:
            (
                SELECT TOP(2) m.Id, m.Actors, m.Director, m.Duration, m.Genre, m.ImageUrl, m.IsActive, m.Name, m.StartTime, m.Story
                FROM Movies AS m
                WHERE (m.IsActive == CAST(1 AS bit)) && (m.Id == @__Id_0)
            ) AS t
            LEFT JOIN Ticket AS t0 ON t.Id == t0.MovieId
            ORDER BY t.Id ASC, t0.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movie>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 19:16:46.459 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 19:16:46.497 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (34ms).
2022-03-20 19:16:46.539 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:16:48.961 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:16:48.988 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE ([m].[IsActive] = CAST(1 AS bit)) AND ([m].[Id] = @__Id_0)
) AS [t]
LEFT JOIN [Ticket] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:16:49.055 +04:00 [INF] Executed DbCommand (70ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE ([m].[IsActive] = CAST(1 AS bit)) AND ([m].[Id] = @__Id_0)
) AS [t]
LEFT JOIN [Ticket] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:16:49.112 +04:00 [DBG] Context 'MovieContext' started tracking 'Movie' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:16:49.189 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:16:49.224 +04:00 [DBG] A data reader was disposed.
2022-03-20 19:16:49.231 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:16:49.240 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:21:33.851 +04:00 [DBG] Hosting starting
2022-03-20 19:21:34.310 +04:00 [DBG] Failed to locate the development https certificate at 'null'.
2022-03-20 19:21:34.405 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-03-20 19:21:34.482 +04:00 [INF] Now listening on: https://localhost:5001
2022-03-20 19:21:34.484 +04:00 [INF] Now listening on: http://localhost:5000
2022-03-20 19:21:34.485 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 19:21:34.487 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 19:21:34.489 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 19:21:34.491 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 19:21:34.493 +04:00 [INF] Hosting environment: Development
2022-03-20 19:21:34.494 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 19:21:34.496 +04:00 [DBG] Hosting started
2022-03-20 19:21:34.556 +04:00 [DBG] Connection id "0HMGAGL8SMJ7U" received FIN.
2022-03-20 19:21:34.575 +04:00 [DBG] Connection id "0HMGAGL8SMJ7U" accepted.
2022-03-20 19:21:34.578 +04:00 [DBG] Connection id "0HMGAGL8SMJ7U" started.
2022-03-20 19:21:34.717 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:21:34.781 +04:00 [DBG] Connection id "0HMGAGL8SMJ7U" stopped.
2022-03-20 19:21:34.788 +04:00 [DBG] Connection id "0HMGAGL8SMJ7U" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:21:34.888 +04:00 [DBG] Connection id "0HMGAGL8SMJ7V" accepted.
2022-03-20 19:21:34.892 +04:00 [DBG] Connection id "0HMGAGL8SMJ7V" started.
2022-03-20 19:21:35.032 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2022-03-20 19:21:35.087 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 19:21:35.142 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:21:35.239 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:21:35.249 +04:00 [INF] Request finished in 218.9955ms 200 text/html;charset=utf-8
2022-03-20 19:21:35.252 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:21:35.263 +04:00 [INF] Request finished in 11.6262ms 200 application/javascript; charset=utf-8
2022-03-20 19:21:35.666 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2022-03-20 19:21:35.804 +04:00 [INF] Request finished in 138.9692ms 200 application/json;charset=utf-8
2022-03-20 19:21:45.601 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Movie/1  
2022-03-20 19:21:45.608 +04:00 [DBG] The request path  does not match the path filter
2022-03-20 19:21:45.648 +04:00 [DBG] 1 candidate(s) found for the request path '/Movie/1'
2022-03-20 19:21:45.656 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)' with route pattern 'Movie/{Id}' is valid for the request path '/Movie/1'
2022-03-20 19:21:45.659 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:21:45.665 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:21:45.679 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 19:21:45.753 +04:00 [INF] Route matched with {action = "GetMovieById", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Movies.ItAcademy.Api.Models.DTO.MovieDTO]] GetMovieById(Int32) on controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api).
2022-03-20 19:21:45.759 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 19:21:45.761 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 19:21:45.763 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 19:21:45.766 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 19:21:45.768 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 19:21:45.770 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:21:45.951 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 19:21:46.786 +04:00 [DBG] The property 'MovieId.Ticket' was created in shadow state because there are no eligible CLR members with a matching name.
2022-03-20 19:21:46.989 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 19:21:47.003 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:21:47.024 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:21:47.029 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' using the name 'Id' in request data ...
2022-03-20 19:21:47.032 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:21:47.034 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:21:47.037 +04:00 [DBG] Attempting to validate the bound parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:21:47.042 +04:00 [DBG] Done attempting to validate the bound parameter 'Id' of type 'System.Int32'.
2022-03-20 19:21:53.068 +04:00 [DBG] Compiling query expression: 
'DbSet<Movie>()
    .Include(x => x.Tickets)
    .SingleOrDefault(x => x.Id == __Id_0)'
2022-03-20 19:21:53.136 +04:00 [DBG] Including navigation: 'Movie.Tickets'.
2022-03-20 19:21:53.446 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Movie>(
    asyncEnumerable: new SingleQueryingEnumerable<Movie>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
            SELECT t.Id, t.Actors, t.Director, t.Duration, t.Genre, t.ImageUrl, t.IsActive, t.Name, t.StartTime, t.Story, t0.Id, t0.IsAcquired, t0.IsBooked, t0.IsCanceled, t0.MovieId
            FROM Projection Mapping:
            (
                SELECT TOP(2) m.Id, m.Actors, m.Director, m.Duration, m.Genre, m.ImageUrl, m.IsActive, m.Name, m.StartTime, m.Story
                FROM Movies AS m
                WHERE m.Id == @__Id_0
            ) AS t
            LEFT JOIN Ticket AS t0 ON t.Id == t0.MovieId
            ORDER BY t.Id ASC, t0.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movie>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 19:21:53.508 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 19:21:53.546 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (32ms).
2022-03-20 19:21:53.585 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:21:54.097 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:21:54.123 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE [m].[Id] = @__Id_0
) AS [t]
LEFT JOIN [Ticket] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:21:54.194 +04:00 [INF] Executed DbCommand (72ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE [m].[Id] = @__Id_0
) AS [t]
LEFT JOIN [Ticket] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:21:54.249 +04:00 [DBG] Context 'MovieContext' started tracking 'Movie' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:21:54.343 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:21:54.386 +04:00 [DBG] A data reader was disposed.
2022-03-20 19:21:54.393 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:21:54.410 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:36:40.894 +04:00 [DBG] Hosting starting
2022-03-20 19:36:41.104 +04:00 [DBG] Failed to locate the development https certificate at 'null'.
2022-03-20 19:36:41.155 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-03-20 19:36:41.180 +04:00 [INF] Now listening on: https://localhost:5001
2022-03-20 19:36:41.181 +04:00 [INF] Now listening on: http://localhost:5000
2022-03-20 19:36:41.183 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 19:36:41.184 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 19:36:41.184 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 19:36:41.185 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 19:36:41.186 +04:00 [INF] Hosting environment: Development
2022-03-20 19:36:41.187 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 19:36:41.188 +04:00 [DBG] Hosting started
2022-03-20 19:36:41.404 +04:00 [DBG] Connection id "0HMGAGTN52OOI" received FIN.
2022-03-20 19:36:41.406 +04:00 [DBG] Connection id "0HMGAGTN52OOJ" reset.
2022-03-20 19:36:41.418 +04:00 [DBG] Connection id "0HMGAGTN52OOJ" accepted.
2022-03-20 19:36:41.418 +04:00 [DBG] Connection id "0HMGAGTN52OOI" accepted.
2022-03-20 19:36:41.420 +04:00 [DBG] Connection id "0HMGAGTN52OOJ" started.
2022-03-20 19:36:41.421 +04:00 [DBG] Connection id "0HMGAGTN52OOI" started.
2022-03-20 19:36:41.440 +04:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException: An existing connection was forcibly closed by the remote host.
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketAwaitableEventArgs.<GetResult>g__ThrowSocketException|7_0(SocketError e)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketAwaitableEventArgs.GetResult()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.ProcessReceives()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.PipeCompletion.ThrowLatchedException()
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.ReadAsync(CancellationToken token)
   at System.IO.Pipelines.Pipe.DefaultPipeReader.ReadAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Net.FixedSizeReader.ReadPacketAsync(Stream transport, AsyncProtocolRequest request)
   at System.Net.Security.SslStream.ThrowIfExceptional()
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsServer(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_1(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:36:41.440 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:36:41.500 +04:00 [DBG] Connection id "0HMGAGTN52OOJ" stopped.
2022-03-20 19:36:41.532 +04:00 [DBG] Connection id "0HMGAGTN52OOI" stopped.
2022-03-20 19:36:41.539 +04:00 [DBG] Connection id "0HMGAGTN52OOK" accepted.
2022-03-20 19:36:41.545 +04:00 [DBG] Connection id "0HMGAGTN52OOJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:36:41.549 +04:00 [DBG] Connection id "0HMGAGTN52OOI" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:36:41.558 +04:00 [DBG] Connection id "0HMGAGTN52OOK" started.
2022-03-20 19:36:41.677 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2022-03-20 19:36:41.705 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 19:36:41.762 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:36:41.851 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:36:41.856 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:36:41.858 +04:00 [INF] Request finished in 184.5792ms 200 text/html;charset=utf-8
2022-03-20 19:36:41.861 +04:00 [INF] Request finished in 5.5176ms 200 application/javascript; charset=utf-8
2022-03-20 19:36:42.322 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2022-03-20 19:36:42.449 +04:00 [INF] Request finished in 126.9818ms 200 application/json;charset=utf-8
2022-03-20 19:38:45.115 +04:00 [DBG] Connection id "0HMGAGTN52OOK" is closing.
2022-03-20 19:38:45.122 +04:00 [DBG] Connection id "0HMGAGTN52OOK" is closed. The last processed stream ID was 5.
2022-03-20 19:38:45.125 +04:00 [DBG] Connection id "0HMGAGTN52OOK" received FIN.
2022-03-20 19:38:45.126 +04:00 [DBG] Connection id "0HMGAGTN52OOK" sending FIN because: "The client closed the connection."
2022-03-20 19:38:45.140 +04:00 [DBG] Connection id "0HMGAGTN52OOK" stopped.
2022-03-20 19:40:00.959 +04:00 [DBG] Connection id "0HMGAGTN52OOL" received FIN.
2022-03-20 19:40:00.962 +04:00 [DBG] Connection id "0HMGAGTN52OOL" accepted.
2022-03-20 19:40:00.966 +04:00 [DBG] Connection id "0HMGAGTN52OOL" started.
2022-03-20 19:40:00.967 +04:00 [DBG] Connection id "0HMGAGTN52OOM" received FIN.
2022-03-20 19:40:00.969 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:40:00.971 +04:00 [DBG] Connection id "0HMGAGTN52OOM" accepted.
2022-03-20 19:40:00.979 +04:00 [DBG] Connection id "0HMGAGTN52OON" accepted.
2022-03-20 19:40:00.994 +04:00 [DBG] Connection id "0HMGAGTN52OOM" started.
2022-03-20 19:40:00.994 +04:00 [DBG] Connection id "0HMGAGTN52OOL" stopped.
2022-03-20 19:40:00.995 +04:00 [DBG] Connection id "0HMGAGTN52OON" started.
2022-03-20 19:40:00.997 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Authentication failed because the remote party has closed the transport stream.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.ProcessAuthentication(LazyAsyncResult lazyResult, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.BeginAuthenticateAsServer(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken, AsyncCallback asyncCallback, Object asyncState)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsServerAsync>b__69_0(SslServerAuthenticationOptions arg1, CancellationToken arg2, AsyncCallback callback, Object state)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncImpl[TArg1,TArg2](Func`5 beginMethod, Func`2 endFunction, Action`1 endAction, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state, TaskCreationOptions creationOptions)
   at System.Threading.Tasks.TaskFactory.FromAsync[TArg1,TArg2](Func`5 beginMethod, Action`1 endMethod, TArg1 arg1, TArg2 arg2, Object state)
   at System.Net.Security.SslStream.AuthenticateAsServerAsync(SslServerAuthenticationOptions sslServerAuthenticationOptions, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.InnerOnConnectionAsync(ConnectionContext context)
2022-03-20 19:40:00.997 +04:00 [DBG] Connection id "0HMGAGTN52OOL" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:40:01.004 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2022-03-20 19:40:01.011 +04:00 [DBG] Connection id "0HMGAGTN52OOM" stopped.
2022-03-20 19:40:01.015 +04:00 [DBG] Connection id "0HMGAGTN52OOM" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:40:01.018 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:40:01.032 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:40:01.034 +04:00 [INF] Request finished in 29.8967ms 200 text/html;charset=utf-8
2022-03-20 19:40:01.066 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:40:01.068 +04:00 [INF] Request finished in 2.2812ms 200 application/javascript; charset=utf-8
2022-03-20 19:40:01.607 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2022-03-20 19:40:01.623 +04:00 [INF] Request finished in 16.1059ms 200 application/json;charset=utf-8
2022-03-20 19:40:06.005 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2022-03-20 19:40:06.011 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:40:06.019 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:40:06.021 +04:00 [INF] Request finished in 16.0026ms 200 text/html;charset=utf-8
2022-03-20 19:40:06.057 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:40:06.062 +04:00 [INF] Request finished in 5.1487ms 200 application/javascript; charset=utf-8
2022-03-20 19:40:06.503 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2022-03-20 19:40:06.515 +04:00 [INF] Request finished in 11.8239ms 200 application/json;charset=utf-8
2022-03-20 19:40:19.662 +04:00 [INF] Request starting HTTP/2 GET https://localhost:5001/Movie/1  
2022-03-20 19:40:19.666 +04:00 [DBG] The request path  does not match the path filter
2022-03-20 19:40:19.709 +04:00 [DBG] 1 candidate(s) found for the request path '/Movie/1'
2022-03-20 19:40:19.717 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)' with route pattern 'Movie/{Id}' is valid for the request path '/Movie/1'
2022-03-20 19:40:19.720 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:40:19.724 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:40:19.736 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 19:40:19.792 +04:00 [INF] Route matched with {action = "GetMovieById", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Movies.ItAcademy.Api.Models.DTO.MovieDTO]] GetMovieById(Int32) on controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api).
2022-03-20 19:40:19.796 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 19:40:19.798 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 19:40:19.799 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 19:40:19.801 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 19:40:19.802 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 19:40:19.805 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:40:19.898 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 19:40:20.688 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 19:40:20.692 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 19:40:20.700 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:40:20.704 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' using the name 'Id' in request data ...
2022-03-20 19:40:20.706 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:40:20.708 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 19:40:20.710 +04:00 [DBG] Attempting to validate the bound parameter 'Id' of type 'System.Int32' ...
2022-03-20 19:40:20.713 +04:00 [DBG] Done attempting to validate the bound parameter 'Id' of type 'System.Int32'.
2022-03-20 19:40:20.812 +04:00 [DBG] Compiling query expression: 
'DbSet<Movie>()
    .Include(x => x.Tickets)
    .SingleOrDefault(x => x.Id == __Id_0)'
2022-03-20 19:40:20.857 +04:00 [DBG] Including navigation: 'Movie.Tickets'.
2022-03-20 19:40:21.104 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Movie>(
    asyncEnumerable: new SingleQueryingEnumerable<Movie>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
            SELECT t.Id, t.Actors, t.Director, t.Duration, t.Genre, t.ImageUrl, t.IsActive, t.Name, t.StartTime, t.Story, t0.Id, t0.IsAcquired, t0.IsBooked, t0.IsCanceled, t0.MovieId
            FROM Projection Mapping:
            (
                SELECT TOP(2) m.Id, m.Actors, m.Director, m.Duration, m.Genre, m.ImageUrl, m.IsActive, m.Name, m.StartTime, m.Story
                FROM Movies AS m
                WHERE m.Id == @__Id_0
            ) AS t
            LEFT JOIN Tickets AS t0 ON t.Id == t0.Id
            ORDER BY t.Id ASC, t0.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movie>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 19:40:21.150 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 19:40:21.178 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (27ms).
2022-03-20 19:40:21.196 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:40:21.421 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:40:21.435 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE [m].[Id] = @__Id_0
) AS [t]
LEFT JOIN [Tickets] AS [t0] ON [t].[Id] = [t0].[Id]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:40:21.496 +04:00 [INF] Executed DbCommand (64ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE [m].[Id] = @__Id_0
) AS [t]
LEFT JOIN [Tickets] AS [t0] ON [t].[Id] = [t0].[Id]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:40:21.539 +04:00 [DBG] Context 'MovieContext' started tracking 'Movie' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:40:21.600 +04:00 [DBG] A data reader was disposed.
2022-03-20 19:40:21.605 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:40:21.613 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:40:21.727 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-03-20 19:40:21.732 +04:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2022-03-20 19:40:21.734 +04:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2022-03-20 19:40:21.735 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-03-20 19:40:21.737 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-03-20 19:40:21.738 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-03-20 19:40:21.740 +04:00 [INF] Executing ObjectResult, writing value of type 'Movies.ItAcademy.Api.Models.DTO.MovieDTO'.
2022-03-20 19:40:21.766 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api) in 1956.8644ms
2022-03-20 19:40:21.769 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 19:40:21.773 +04:00 [INF] HTTP GET /Movie/1 responded 200 in 2101.8751 ms
2022-03-20 19:40:21.778 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 19:40:21.783 +04:00 [INF] Request finished in 2120.9436ms 200 application/json; charset=utf-8
2022-03-20 19:40:34.717 +04:00 [INF] Application is shutting down...
2022-03-20 19:40:34.717 +04:00 [DBG] Hosting stopping
2022-03-20 19:40:34.724 +04:00 [DBG] Connection id "0HMGAGTN52OON" is closing.
2022-03-20 19:40:34.725 +04:00 [DBG] Connection id "0HMGAGTN52OON" is closed. The last processed stream ID was 13.
2022-03-20 19:40:34.728 +04:00 [DBG] Connection id "0HMGAGTN52OON" received FIN.
2022-03-20 19:40:34.728 +04:00 [DBG] Connection id "0HMGAGTN52OON" stopped.
2022-03-20 19:40:34.731 +04:00 [DBG] Connection id "0HMGAGTN52OON" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-03-20 19:40:34.735 +04:00 [DBG] Hosting stopped
2022-03-20 19:41:18.312 +04:00 [DBG] Hosting starting
2022-03-20 19:41:18.785 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 19:41:18.806 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 19:41:18.806 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 19:41:18.807 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 19:41:18.807 +04:00 [INF] Hosting environment: Development
2022-03-20 19:41:18.807 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 19:41:18.807 +04:00 [DBG] Hosting started
2022-03-20 19:41:18.851 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger  
2022-03-20 19:41:18.896 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 19:41:18.942 +04:00 [INF] Request finished in 91.271ms 301 
2022-03-20 19:41:18.954 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/index.html  
2022-03-20 19:41:18.956 +04:00 [DBG] Connection ID "18086456118015426826" disconnecting.
2022-03-20 19:41:19.035 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:41:19.168 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:41:19.171 +04:00 [INF] Request finished in 216.1289ms 200 text/html;charset=utf-8
2022-03-20 19:41:19.172 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui.css  
2022-03-20 19:41:19.174 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-standalone-preset.js  
2022-03-20 19:41:19.174 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-bundle.js  
2022-03-20 19:41:19.220 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-03-20 19:41:19.220 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-03-20 19:41:19.220 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 19:41:19.220 +04:00 [INF] Request finished in 46.5513ms 200 application/javascript
2022-03-20 19:41:19.220 +04:00 [INF] Request finished in 46.5937ms 200 application/javascript
2022-03-20 19:41:19.220 +04:00 [INF] Request finished in 48.0672ms 200 text/css
2022-03-20 19:41:19.278 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:41:19.280 +04:00 [INF] Request finished in 2.2453ms 200 application/javascript; charset=utf-8
2022-03-20 19:41:19.510 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 19:41:19.513 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 19:41:19.515 +04:00 [INF] Request finished in 4.8478ms 200 image/png
2022-03-20 19:41:19.731 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/v1/swagger.json  
2022-03-20 19:41:19.824 +04:00 [INF] Request finished in 93.9232ms 200 application/json;charset=utf-8
2022-03-20 19:43:36.502 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 19:43:36.503 +04:00 [DBG] POST requests are not supported
2022-03-20 19:43:36.563 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 19:43:36.574 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 19:43:36.575 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 19:43:36.579 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 19:43:36.589 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 19:43:36.642 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 19:43:36.643 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 19:43:36.644 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 19:43:36.644 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 19:43:36.644 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 19:43:36.644 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 19:43:36.645 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 19:43:36.837 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 19:43:37.808 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 19:43:37.810 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 19:43:37.821 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 19:43:37.826 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 19:43:37.828 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 19:43:37.843 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 19:43:37.844 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 19:43:37.844 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 19:43:37.845 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 19:43:37.854 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 19:47:10.121 +04:00 [DBG] Hosting starting
2022-03-20 19:47:10.527 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 19:47:10.540 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 19:47:10.540 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 19:47:10.541 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 19:47:10.541 +04:00 [INF] Hosting environment: Development
2022-03-20 19:47:10.541 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 19:47:10.541 +04:00 [DBG] Hosting started
2022-03-20 19:47:10.571 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger  
2022-03-20 19:47:10.610 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 19:47:10.653 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/index.html  
2022-03-20 19:47:10.654 +04:00 [INF] Request finished in 88.9741ms 301 
2022-03-20 19:47:10.672 +04:00 [DBG] Connection ID "18302628917309079664" disconnecting.
2022-03-20 19:47:10.721 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 19:47:10.840 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 19:47:10.843 +04:00 [INF] Request finished in 189.6489ms 200 text/html;charset=utf-8
2022-03-20 19:47:10.844 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui.css  
2022-03-20 19:47:10.844 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-bundle.js  
2022-03-20 19:47:10.845 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-standalone-preset.js  
2022-03-20 19:47:10.921 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 19:47:10.921 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-03-20 19:47:10.921 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-03-20 19:47:10.921 +04:00 [INF] Request finished in 77.1036ms 200 text/css
2022-03-20 19:47:10.921 +04:00 [INF] Request finished in 75.5109ms 200 application/javascript
2022-03-20 19:47:10.921 +04:00 [INF] Request finished in 76.6338ms 200 application/javascript
2022-03-20 19:47:10.957 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js  
2022-03-20 19:47:10.960 +04:00 [INF] Request finished in 3.356ms 200 application/javascript; charset=utf-8
2022-03-20 19:47:11.189 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 19:47:11.192 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 19:47:11.199 +04:00 [INF] Request finished in 9.6852ms 200 image/png
2022-03-20 19:47:11.420 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/v1/swagger.json  
2022-03-20 19:47:11.517 +04:00 [INF] Request finished in 95.6309ms 200 application/json;charset=utf-8
2022-03-20 19:47:13.676 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 19:47:13.677 +04:00 [DBG] POST requests are not supported
2022-03-20 19:47:13.741 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 19:47:13.749 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 19:47:13.751 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 19:47:13.756 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 19:47:13.767 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 19:47:13.819 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 19:47:13.820 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 19:47:13.820 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 19:47:13.820 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 19:47:13.821 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 19:47:13.821 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 19:47:13.822 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 19:47:14.013 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 19:47:14.983 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 19:47:14.986 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 19:47:14.992 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 19:47:14.994 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 19:47:14.995 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 19:47:15.004 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 19:47:15.004 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 19:47:15.005 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 19:47:15.005 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 19:47:15.009 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 19:47:38.659 +04:00 [DBG] Compiling query expression: 
'DbSet<Movie>()
    .Include(x => x.Tickets)
    .SingleOrDefault(x => x.Id == __Id_0)'
2022-03-20 19:47:38.733 +04:00 [DBG] Including navigation: 'Movie.Tickets'.
2022-03-20 19:47:39.090 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Movie>(
    asyncEnumerable: new SingleQueryingEnumerable<Movie>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
            SELECT t.Id, t.Actors, t.Director, t.Duration, t.Genre, t.ImageUrl, t.IsActive, t.Name, t.StartTime, t.Story, t0.Id, t0.IsAcquired, t0.IsBooked, t0.IsCanceled, t0.MovieId
            FROM Projection Mapping:
            (
                SELECT TOP(2) m.Id, m.Actors, m.Director, m.Duration, m.Genre, m.ImageUrl, m.IsActive, m.Name, m.StartTime, m.Story
                FROM Movies AS m
                WHERE m.Id == @__Id_0
            ) AS t
            LEFT JOIN Tickets AS t0 ON t.Id == t0.Id
            ORDER BY t.Id ASC, t0.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movie>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 19:47:39.145 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 19:47:39.199 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (47ms).
2022-03-20 19:47:39.251 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:47:40.245 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:47:40.258 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE [m].[Id] = @__Id_0
) AS [t]
LEFT JOIN [Tickets] AS [t0] ON [t].[Id] = [t0].[Id]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:47:40.319 +04:00 [INF] Executed DbCommand (64ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE [m].[Id] = @__Id_0
) AS [t]
LEFT JOIN [Tickets] AS [t0] ON [t].[Id] = [t0].[Id]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 19:47:40.360 +04:00 [DBG] Context 'MovieContext' started tracking 'Movie' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:47:40.438 +04:00 [DBG] A data reader was disposed.
2022-03-20 19:47:40.444 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:47:40.453 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:47:59.727 +04:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()
    .Any(x => x.Id == __Id_0)'
2022-03-20 19:47:59.735 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                Projection Mapping:
                SELECT 1
                FROM Tickets AS t
                WHERE t.Id == @__Id_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 19:47:59.750 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 19:47:59.750 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 19:47:59.750 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:47:59.753 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:47:59.753 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 19:47:59.760 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 19:47:59.902 +04:00 [DBG] A data reader was disposed.
2022-03-20 19:47:59.903 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:47:59.903 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 19:48:05.963 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 19:48:13.627 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 59797.1017ms
2022-03-20 19:48:13.765 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 19:48:14.045 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 60363.1055 ms
System.InvalidOperationException: The instance of entity type 'Movie' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 34
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 32
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 19:48:14.587 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'Movie' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityStateAsync(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintActionAsync(EntityEntryGraphNode`1 node, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraphAsync[TState](EntityEntryGraphNode`1 node, Func`3 handleNode, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 34
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 32
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 19:48:14.617 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 19:48:14.621 +04:00 [INF] Request finished in 60947.5803ms 500 text/plain
2022-03-20 20:02:10.966 +04:00 [DBG] Hosting starting
2022-03-20 20:02:11.379 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 20:02:11.392 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 20:02:11.392 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 20:02:11.393 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 20:02:11.393 +04:00 [INF] Hosting environment: Development
2022-03-20 20:02:11.393 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 20:02:11.393 +04:00 [DBG] Hosting started
2022-03-20 20:02:11.419 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger  
2022-03-20 20:02:11.458 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 20:02:11.505 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/index.html  
2022-03-20 20:02:11.507 +04:00 [INF] Request finished in 92.3353ms 301 
2022-03-20 20:02:11.519 +04:00 [DBG] Connection ID "18302628908719145212" disconnecting.
2022-03-20 20:02:11.568 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 20:02:11.691 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 20:02:11.694 +04:00 [INF] Request finished in 188.7742ms 200 text/html;charset=utf-8
2022-03-20 20:02:11.696 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui.css  
2022-03-20 20:02:11.697 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-bundle.js  
2022-03-20 20:02:11.698 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-standalone-preset.js  
2022-03-20 20:02:11.698 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js  
2022-03-20 20:02:11.704 +04:00 [INF] Request finished in 6.4387ms 200 application/javascript; charset=utf-8
2022-03-20 20:02:11.762 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-03-20 20:02:11.762 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 20:02:11.762 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-03-20 20:02:11.763 +04:00 [INF] Request finished in 65.2782ms 200 application/javascript
2022-03-20 20:02:11.763 +04:00 [INF] Request finished in 67.4843ms 200 text/css
2022-03-20 20:02:11.763 +04:00 [INF] Request finished in 65.9217ms 200 application/javascript
2022-03-20 20:02:12.007 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 20:02:12.010 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 20:02:12.011 +04:00 [INF] Request finished in 4.0658ms 200 image/png
2022-03-20 20:02:12.215 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/v1/swagger.json  
2022-03-20 20:02:12.357 +04:00 [INF] Request finished in 141.9255ms 200 application/json;charset=utf-8
2022-03-20 20:02:15.980 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 20:02:15.981 +04:00 [DBG] POST requests are not supported
2022-03-20 20:02:16.032 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:02:16.043 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:02:16.044 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:02:16.048 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:02:16.059 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 20:02:16.108 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:02:16.109 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:02:16.109 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:02:16.109 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:02:16.110 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:02:16.110 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:02:16.111 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:02:16.259 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 20:02:17.098 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:02:17.101 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:02:17.111 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:02:17.114 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:02:17.115 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:02:17.126 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:02:17.126 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:02:17.126 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:02:17.126 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:02:17.131 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:02:28.842 +04:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()
    .Any(x => x.Id == __Id_0)'
2022-03-20 20:02:29.032 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                Projection Mapping:
                SELECT 1
                FROM Tickets AS t
                WHERE t.Id == @__Id_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 20:02:29.115 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:02:29.166 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2022-03-20 20:02:29.211 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:02:29.686 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:02:29.699 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:02:29.762 +04:00 [INF] Executed DbCommand (67ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:02:29.789 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:02:29.793 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:02:29.800 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:02:37.489 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:02:41.750 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:02:41.754 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:02:41.765 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:02:41.788 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:02:41.790 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:02:41.792 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:02:41.803 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:02:41.870 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:02:41.870 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:02:41.873 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:02:41.881 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:02:41.890 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:02:42.055 +04:00 [DBG] Committing transaction.
2022-03-20 20:02:42.088 +04:00 [DBG] Committed transaction.
2022-03-20 20:02:42.090 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:02:42.091 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:02:42.093 +04:00 [DBG] Disposing transaction.
2022-03-20 20:02:42.105 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:02:42.107 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
2022-03-20 20:02:50.071 +04:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-03-20 20:02:50.078 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 33963.154ms
2022-03-20 20:02:50.079 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:02:50.083 +04:00 [INF] HTTP POST /Ticket/Booked responded 200 in 34097.2402 ms
2022-03-20 20:02:50.086 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:02:50.090 +04:00 [INF] Request finished in 34112.6343ms 200 
2022-03-20 20:04:42.329 +04:00 [DBG] Hosting starting
2022-03-20 20:04:42.536 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 20:04:42.538 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 20:04:42.538 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 20:04:42.539 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 20:04:42.539 +04:00 [INF] Hosting environment: Development
2022-03-20 20:04:42.539 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 20:04:42.539 +04:00 [DBG] Hosting started
2022-03-20 20:04:42.564 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger  
2022-03-20 20:04:42.592 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 20:04:42.619 +04:00 [INF] Request finished in 59.4943ms 301 
2022-03-20 20:04:42.622 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/index.html  
2022-03-20 20:04:42.625 +04:00 [DBG] Connection ID "18086456118015426840" disconnecting.
2022-03-20 20:04:42.659 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 20:04:42.753 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 20:04:42.756 +04:00 [INF] Request finished in 133.6645ms 200 text/html;charset=utf-8
2022-03-20 20:04:42.757 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui.css  
2022-03-20 20:04:42.758 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-bundle.js  
2022-03-20 20:04:42.759 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js  
2022-03-20 20:04:42.759 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-standalone-preset.js  
2022-03-20 20:04:42.762 +04:00 [INF] Request finished in 3.6191ms 200 application/javascript; charset=utf-8
2022-03-20 20:04:42.781 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-03-20 20:04:42.781 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-03-20 20:04:42.781 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 20:04:42.781 +04:00 [INF] Request finished in 21.9246ms 200 application/javascript
2022-03-20 20:04:42.781 +04:00 [INF] Request finished in 22.9438ms 200 application/javascript
2022-03-20 20:04:42.781 +04:00 [INF] Request finished in 23.752ms 200 text/css
2022-03-20 20:04:43.065 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 20:04:43.067 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 20:04:43.068 +04:00 [INF] Request finished in 3.2868ms 200 image/png
2022-03-20 20:04:43.258 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/v1/swagger.json  
2022-03-20 20:04:43.373 +04:00 [INF] Request finished in 115.129ms 200 application/json;charset=utf-8
2022-03-20 20:04:48.774 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 20:04:48.775 +04:00 [DBG] POST requests are not supported
2022-03-20 20:04:48.810 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:04:48.818 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:04:48.818 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:04:48.823 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:04:48.833 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 20:04:48.879 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:04:48.880 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:04:48.880 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:04:48.880 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:04:48.881 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:04:48.881 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:04:48.881 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:04:48.969 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 20:04:49.740 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:04:49.740 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:04:49.745 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:04:49.748 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:04:49.748 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:04:49.757 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:04:49.757 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:04:49.757 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:04:49.757 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:04:49.761 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:04:49.944 +04:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()
    .Any(x => x.Id == __Id_0)'
2022-03-20 20:04:50.099 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                Projection Mapping:
                SELECT 1
                FROM Tickets AS t
                WHERE t.Id == @__Id_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 20:04:50.146 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:04:50.176 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (25ms).
2022-03-20 20:04:50.191 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:04:50.400 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:04:50.411 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:04:50.470 +04:00 [INF] Executed DbCommand (62ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:04:50.491 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:04:50.495 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:04:50.500 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:04:50.567 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:04:50.571 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:04:50.574 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:04:50.581 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:04:50.598 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:04:50.599 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:04:50.600 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:04:50.608 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:04:50.653 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:04:50.653 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:04:50.656 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 20:04:50.660 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 20:04:50.668 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:04:50.671 +04:00 [DBG] Committing transaction.
2022-03-20 20:04:50.686 +04:00 [DBG] Committed transaction.
2022-03-20 20:04:50.689 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:04:50.689 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:04:50.691 +04:00 [DBG] Disposing transaction.
2022-03-20 20:04:50.700 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:04:50.701 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
2022-03-20 20:04:50.708 +04:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-03-20 20:04:50.714 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 1828.2269ms
2022-03-20 20:04:50.714 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:04:50.717 +04:00 [INF] HTTP POST /Ticket/Booked responded 200 in 1938.1061 ms
2022-03-20 20:04:50.718 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:04:50.721 +04:00 [INF] Request finished in 1948.5979ms 200 
2022-03-20 20:06:19.881 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/index.html  
2022-03-20 20:06:19.888 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 20:06:19.904 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 20:06:19.906 +04:00 [INF] Request finished in 25.0558ms 200 text/html;charset=utf-8
2022-03-20 20:06:19.926 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui.css  
2022-03-20 20:06:19.931 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js  
2022-03-20 20:06:19.931 +04:00 [INF] Request finished in 0.6001ms 200 application/javascript; charset=utf-8
2022-03-20 20:06:19.937 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 20:06:19.939 +04:00 [INF] Request finished in 13.5856ms 200 text/css
2022-03-20 20:06:20.128 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 20:06:20.130 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 20:06:20.131 +04:00 [INF] Request finished in 2.9141ms 200 image/png
2022-03-20 20:06:20.253 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/v1/swagger.json  
2022-03-20 20:06:20.266 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 20:06:20.267 +04:00 [INF] Request finished in 14.2705ms 200 application/json;charset=utf-8
2022-03-20 20:06:20.267 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 20:06:20.268 +04:00 [INF] Request finished in 1.6785ms 200 image/png
2022-03-20 20:06:24.045 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 20:06:24.046 +04:00 [DBG] POST requests are not supported
2022-03-20 20:06:24.049 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:06:24.049 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:06:24.050 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:24.052 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:24.053 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:06:24.056 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:06:24.056 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:06:24.057 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:06:24.057 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:06:24.057 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:06:24.058 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:06:24.095 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:06:24.095 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:06:24.095 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:06:24.096 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:06:24.096 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:06:24.097 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:06:24.097 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:24.097 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:24.097 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:06:24.098 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:24.102 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:06:24.102 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:06:24.103 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:24.104 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:24.104 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:06:24.109 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:06:24.109 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:06:24.109 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:24.110 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:24.110 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:06:24.111 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:06:24.111 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:06:24.111 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:06:24.111 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:24.111 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:24.112 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:06:24.112 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:06:24.113 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:06:24.113 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:06:24.114 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 20:06:24.116 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 20:06:24.117 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:06:24.117 +04:00 [DBG] Committing transaction.
2022-03-20 20:06:24.128 +04:00 [DBG] Committed transaction.
2022-03-20 20:06:24.128 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:24.128 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:24.129 +04:00 [DBG] Disposing transaction.
2022-03-20 20:06:24.129 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:06:24.129 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
2022-03-20 20:06:24.130 +04:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-03-20 20:06:24.130 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 72.1594ms
2022-03-20 20:06:24.130 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:24.130 +04:00 [INF] HTTP POST /Ticket/Booked responded 200 in 83.6843 ms
2022-03-20 20:06:24.130 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:06:24.131 +04:00 [INF] Request finished in 86.1076ms 200 
2022-03-20 20:06:25.792 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 20:06:25.793 +04:00 [DBG] POST requests are not supported
2022-03-20 20:06:25.793 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:06:25.794 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:06:25.794 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:25.796 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:25.796 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:06:25.797 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:06:25.798 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:06:25.798 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:06:25.798 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:06:25.799 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:06:25.799 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:06:25.815 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:06:25.817 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:06:25.818 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:06:25.818 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:06:25.818 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:06:25.819 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:06:25.820 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:25.820 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:25.820 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:06:25.820 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:25.825 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:06:25.825 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:06:25.826 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:25.826 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:25.827 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:06:25.829 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:06:25.830 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:06:25.831 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:25.831 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:25.832 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:06:25.833 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:06:25.833 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:06:25.834 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:06:25.835 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:25.835 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:25.836 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:06:25.837 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:06:25.839 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:06:25.840 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:06:25.841 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 20:06:25.843 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 20:06:25.844 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:06:25.844 +04:00 [DBG] Committing transaction.
2022-03-20 20:06:25.846 +04:00 [DBG] Committed transaction.
2022-03-20 20:06:25.846 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:25.846 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:25.847 +04:00 [DBG] Disposing transaction.
2022-03-20 20:06:25.847 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:06:25.847 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
2022-03-20 20:06:25.848 +04:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-03-20 20:06:25.848 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 49.5327ms
2022-03-20 20:06:25.849 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:25.849 +04:00 [INF] HTTP POST /Ticket/Booked responded 200 in 55.7205 ms
2022-03-20 20:06:25.849 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:06:25.850 +04:00 [INF] Request finished in 58.0741ms 200 
2022-03-20 20:06:43.039 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 20:06:43.040 +04:00 [DBG] POST requests are not supported
2022-03-20 20:06:43.040 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:06:43.040 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:06:43.041 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:43.041 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:43.042 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:06:43.042 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:06:43.042 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:06:43.042 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:06:43.042 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:06:43.042 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:06:43.043 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:06:43.045 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:06:43.045 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:06:43.046 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:06:43.047 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:06:43.047 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:06:43.049 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:06:43.049 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:43.049 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:43.049 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:06:43.049 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:06:43.052 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:06:43.052 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:06:43.053 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:43.053 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:43.054 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:06:43.060 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:06:43.060 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:06:43.061 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:43.061 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:43.085 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:06:43.085 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:06:43.086 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:06:43.091 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:06:43.092 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:43.092 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:43.092 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:06:43.093 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:06:43.112 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:06:43.112 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:06:43.112 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:06:43.131 +04:00 [ERR] Failed executing DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:06:43.137 +04:00 [DBG] Disposing transaction.
2022-03-20 20:06:43.137 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:43.137 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:06:43.174 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'MoviesManagement.PersistanceDB.Context.MovieContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_Id". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:dae7dedb-920c-4d52-b6d6-c60d9e3965c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_Id". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:dae7dedb-920c-4d52-b6d6-c60d9e3965c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-03-20 20:06:43.178 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 135.7971ms
2022-03-20 20:06:43.179 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:06:43.179 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 138.9261 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_Id". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:dae7dedb-920c-4d52-b6d6-c60d9e3965c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:06:43.199 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_Id". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:dae7dedb-920c-4d52-b6d6-c60d9e3965c7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:06:43.215 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:06:43.216 +04:00 [INF] Request finished in 177.0303ms 500 text/plain
2022-03-20 20:07:20.395 +04:00 [DBG] Hosting starting
2022-03-20 20:07:20.817 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 20:07:20.828 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 20:07:20.828 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 20:07:20.833 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 20:07:20.833 +04:00 [INF] Hosting environment: Development
2022-03-20 20:07:20.833 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 20:07:20.833 +04:00 [DBG] Hosting started
2022-03-20 20:07:20.863 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger  
2022-03-20 20:07:20.901 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 20:07:20.946 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/index.html  
2022-03-20 20:07:20.947 +04:00 [INF] Request finished in 87.7864ms 301 
2022-03-20 20:07:20.962 +04:00 [DBG] Connection ID "18158513733528191177" disconnecting.
2022-03-20 20:07:21.000 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 20:07:21.150 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 20:07:21.153 +04:00 [INF] Request finished in 207.191ms 200 text/html;charset=utf-8
2022-03-20 20:07:21.156 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui.css  
2022-03-20 20:07:21.157 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-standalone-preset.js  
2022-03-20 20:07:21.157 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-bundle.js  
2022-03-20 20:07:21.159 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js  
2022-03-20 20:07:21.165 +04:00 [INF] Request finished in 6.631ms 200 application/javascript; charset=utf-8
2022-03-20 20:07:21.220 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 20:07:21.220 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-03-20 20:07:21.220 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-03-20 20:07:21.220 +04:00 [INF] Request finished in 63.2676ms 200 application/javascript
2022-03-20 20:07:21.220 +04:00 [INF] Request finished in 64.5187ms 200 text/css
2022-03-20 20:07:21.220 +04:00 [INF] Request finished in 63.3056ms 200 application/javascript
2022-03-20 20:07:21.464 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 20:07:21.467 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 20:07:21.468 +04:00 [INF] Request finished in 4.0133ms 200 image/png
2022-03-20 20:07:21.669 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/v1/swagger.json  
2022-03-20 20:07:21.801 +04:00 [INF] Request finished in 132.7389ms 200 application/json;charset=utf-8
2022-03-20 20:07:25.496 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 20:07:25.497 +04:00 [DBG] POST requests are not supported
2022-03-20 20:07:25.542 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:07:25.550 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:07:25.551 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:07:25.555 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:07:25.567 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 20:07:25.619 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:07:25.619 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:07:25.620 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:07:25.620 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:07:25.620 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:07:25.620 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:07:25.621 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:07:25.763 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 20:07:26.604 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:07:26.605 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:07:26.612 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:07:26.614 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:07:26.615 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:07:26.625 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:07:26.625 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:07:26.625 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:07:26.626 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:07:26.630 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:07:42.305 +04:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()
    .Any(x => x.Id == __Id_0)'
2022-03-20 20:07:42.520 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                Projection Mapping:
                SELECT 1
                FROM Tickets AS t
                WHERE t.Id == @__Id_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 20:07:42.578 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:07:42.621 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (38ms).
2022-03-20 20:07:42.687 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:07:43.170 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:07:43.183 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:07:43.251 +04:00 [INF] Executed DbCommand (71ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:07:43.277 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:07:43.281 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:07:43.294 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:07:53.022 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:08:01.226 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:08:01.229 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:08:01.244 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:08:01.268 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:08:01.270 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:08:01.272 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:08:01.282 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:08:01.351 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:08:01.352 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:08:01.354 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:08:01.747 +04:00 [ERR] Failed executing DbCommand (352ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:08:01.960 +04:00 [DBG] Disposing transaction.
2022-03-20 20:08:01.963 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:08:01.963 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:08:02.498 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'MoviesManagement.PersistanceDB.Context.MovieContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_Id". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b6d9a600-60e9-4137-9a9e-890caf75f950
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_Id". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b6d9a600-60e9-4137-9a9e-890caf75f950
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-03-20 20:08:03.588 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 37962.1621ms
2022-03-20 20:08:03.689 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:08:03.969 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 38467.7506 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_Id". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b6d9a600-60e9-4137-9a9e-890caf75f950
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:08:04.434 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_Id". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b6d9a600-60e9-4137-9a9e-890caf75f950
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:08:04.453 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:08:04.455 +04:00 [INF] Request finished in 38961.6081ms 500 text/plain
2022-03-20 20:14:56.905 +04:00 [DBG] Hosting starting
2022-03-20 20:14:57.168 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 20:14:57.171 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 20:14:57.171 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 20:14:57.172 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 20:14:57.172 +04:00 [INF] Hosting environment: Development
2022-03-20 20:14:57.172 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 20:14:57.172 +04:00 [DBG] Hosting started
2022-03-20 20:14:57.199 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger  
2022-03-20 20:14:57.231 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 20:14:57.266 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/index.html  
2022-03-20 20:14:57.266 +04:00 [INF] Request finished in 71.5212ms 301 
2022-03-20 20:14:57.271 +04:00 [DBG] Connection ID "18302628887244308727" disconnecting.
2022-03-20 20:14:57.307 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 20:14:57.401 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 20:14:57.403 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui.css  
2022-03-20 20:14:57.404 +04:00 [INF] Request finished in 138.2922ms 200 text/html;charset=utf-8
2022-03-20 20:14:57.405 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-bundle.js  
2022-03-20 20:14:57.405 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-standalone-preset.js  
2022-03-20 20:14:57.406 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js  
2022-03-20 20:14:57.411 +04:00 [INF] Request finished in 5.0591ms 200 application/javascript; charset=utf-8
2022-03-20 20:14:57.429 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-03-20 20:14:57.429 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-03-20 20:14:57.429 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 20:14:57.429 +04:00 [INF] Request finished in 24.2094ms 200 application/javascript
2022-03-20 20:14:57.429 +04:00 [INF] Request finished in 23.7648ms 200 application/javascript
2022-03-20 20:14:57.429 +04:00 [INF] Request finished in 25.7542ms 200 text/css
2022-03-20 20:14:57.696 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 20:14:57.699 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 20:14:57.700 +04:00 [INF] Request finished in 4.3865ms 200 image/png
2022-03-20 20:14:57.885 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/v1/swagger.json  
2022-03-20 20:14:57.989 +04:00 [INF] Request finished in 104.2239ms 200 application/json;charset=utf-8
2022-03-20 20:15:30.109 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 20:15:30.110 +04:00 [DBG] POST requests are not supported
2022-03-20 20:15:30.144 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:15:30.152 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:15:30.152 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:15:30.155 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:15:30.164 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 20:15:30.208 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:15:30.208 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:15:30.209 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:15:30.209 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:15:30.209 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:15:30.209 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:15:30.210 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:15:30.296 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 20:15:31.069 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:15:31.070 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:15:31.076 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:15:31.078 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:15:31.079 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:15:31.087 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:15:31.087 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:15:31.088 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:15:31.088 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:15:31.091 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:15:31.286 +04:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()
    .Any(x => x.Id == __Id_0)'
2022-03-20 20:15:31.442 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                Projection Mapping:
                SELECT 1
                FROM Tickets AS t
                WHERE t.Id == @__Id_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 20:15:31.493 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:15:31.527 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (30ms).
2022-03-20 20:15:31.549 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:15:31.770 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:15:31.785 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:15:31.849 +04:00 [INF] Executed DbCommand (68ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:15:31.873 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:15:31.876 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:15:31.883 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:15:31.975 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:15:31.978 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:15:31.981 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:15:31.992 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:15:32.011 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:15:32.012 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:15:32.013 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:15:32.021 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:15:32.085 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:15:32.085 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:15:32.087 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:15:32.096 +04:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:15:32.104 +04:00 [DBG] Disposing transaction.
2022-03-20 20:15:32.106 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:15:32.106 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:15:32.132 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'MoviesManagement.PersistanceDB.Context.MovieContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-03-20 20:15:32.145 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 1929.6391ms
2022-03-20 20:15:32.146 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:15:32.150 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 2036.3990 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:15:32.169 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:15:32.187 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:15:32.189 +04:00 [INF] Request finished in 2082.3642ms 500 text/plain
2022-03-20 20:16:21.364 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 71
2022-03-20 20:16:21.368 +04:00 [DBG] POST requests are not supported
2022-03-20 20:16:21.371 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:16:21.372 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:16:21.372 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:16:21.373 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:16:21.374 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:16:21.374 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:16:21.374 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:16:21.375 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:16:21.375 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:16:21.375 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:16:21.375 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:16:21.417 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:16:21.418 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:16:21.418 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:16:21.419 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:16:21.419 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:16:21.421 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:16:21.421 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:16:21.421 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:16:21.421 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:16:21.421 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:16:21.426 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:16:21.426 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:16:21.427 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:16:21.427 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:16:21.428 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:16:21.429 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:16:21.430 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:16:21.430 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:16:21.431 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:16:21.442 +04:00 [DBG] 'MovieContext' generated a temporary value for the property 'Id.Ticket'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:16:21.448 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:16:21.448 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:16:21.449 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:16:21.450 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:16:21.451 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:16:21.451 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:16:21.451 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:16:21.452 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:16:21.454 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:16:21.454 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:16:21.455 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 20:16:21.459 +04:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 20:16:21.460 +04:00 [DBG] Disposing transaction.
2022-03-20 20:16:21.460 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:16:21.460 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:16:21.462 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'MoviesManagement.PersistanceDB.Context.MovieContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_MovieId". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_MovieId". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-03-20 20:16:21.466 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 91.1047ms
2022-03-20 20:16:21.467 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:16:21.468 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 99.8404 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_MovieId". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:16:21.475 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_MovieId". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:16:21.499 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:16:21.500 +04:00 [INF] Request finished in 136.4449ms 500 text/plain
2022-03-20 20:19:03.334 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 78
2022-03-20 20:19:03.336 +04:00 [DBG] POST requests are not supported
2022-03-20 20:19:03.337 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:19:03.338 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:19:03.339 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:19:03.341 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:19:03.342 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:19:03.343 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:19:03.343 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:19:03.344 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:19:03.345 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:19:03.345 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:19:03.346 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:19:03.366 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:19:03.367 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:19:03.368 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:19:03.370 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:19:03.370 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:19:03.371 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:19:03.372 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:19:03.372 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:19:03.372 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:19:03.372 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:19:03.375 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:19:03.375 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:19:03.375 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:19:03.376 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:19:03.376 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:19:03.378 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:19:03.378 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:19:03.379 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:19:03.379 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:19:03.380 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:19:03.380 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:19:03.380 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:19:03.380 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:19:03.381 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:19:03.381 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:19:03.381 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:19:03.382 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:19:03.383 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:19:03.384 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:19:03.384 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:19:03.387 +04:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:19:03.388 +04:00 [DBG] Disposing transaction.
2022-03-20 20:19:03.388 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:19:03.388 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:19:03.390 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'MoviesManagement.PersistanceDB.Context.MovieContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-03-20 20:19:03.394 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 48.414ms
2022-03-20 20:19:03.395 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:19:03.395 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 57.8843 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:19:03.402 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d65578de-0380-480c-85a3-6fa4b1f5a766
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:19:03.425 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:19:03.425 +04:00 [INF] Request finished in 91.0909ms 500 text/plain
2022-03-20 20:36:36.659 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 78
2022-03-20 20:36:36.660 +04:00 [DBG] POST requests are not supported
2022-03-20 20:36:36.661 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:36:36.661 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:36:36.661 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:36.662 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:36.663 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:36:36.663 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:36:36.663 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:36:36.663 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:36:36.663 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:36:36.663 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:36:36.664 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:36:36.665 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:36:36.666 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:36:36.666 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:36:36.666 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:36:36.667 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:36:36.668 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:36:36.668 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:36.668 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:36.668 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:36:36.668 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:36.670 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:36:36.671 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:36:36.671 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:36.680 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:36.681 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:36:36.684 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:36:36.684 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:36:36.684 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:36.685 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:36.686 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:36:36.686 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:36:36.686 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:36:36.686 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:36:36.687 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:36.687 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:36.687 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:36:36.689 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:36:36.690 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:36:36.691 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:36:36.691 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:36:36.694 +04:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:36:36.695 +04:00 [DBG] Disposing transaction.
2022-03-20 20:36:36.695 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:36.695 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:36.697 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'MoviesManagement.PersistanceDB.Context.MovieContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-03-20 20:36:36.700 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 36.8541ms
2022-03-20 20:36:36.701 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:36.701 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 40.4987 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:36:36.709 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:36:36.722 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:36:36.723 +04:00 [INF] Request finished in 63.2589ms 500 text/plain
2022-03-20 20:36:51.504 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 71
2022-03-20 20:36:51.506 +04:00 [DBG] POST requests are not supported
2022-03-20 20:36:51.506 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:36:51.507 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:36:51.508 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:51.509 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:51.510 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:36:51.510 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:36:51.510 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:36:51.511 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:36:51.511 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:36:51.511 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:36:51.512 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:36:51.515 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:36:51.515 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:36:51.516 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:36:51.517 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:36:51.517 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:36:51.519 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:36:51.519 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:51.519 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:51.519 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:36:51.520 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:51.524 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:36:51.524 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:36:51.525 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:51.526 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:51.526 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:36:51.529 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:36:51.531 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:36:51.531 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:51.532 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:51.533 +04:00 [DBG] 'MovieContext' generated a temporary value for the property 'Id.Ticket'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:36:51.534 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:36:51.535 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:36:51.535 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:36:51.535 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:36:51.536 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:51.537 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:51.537 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:36:51.538 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:36:51.540 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:36:51.540 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:36:51.541 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 20:36:51.547 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 20:36:51.548 +04:00 [DBG] Disposing transaction.
2022-03-20 20:36:51.549 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:51.549 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:51.552 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'MoviesManagement.PersistanceDB.Context.MovieContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_MovieId". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_MovieId". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-03-20 20:36:51.556 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 44.7885ms
2022-03-20 20:36:51.557 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:51.557 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 51.1732 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_MovieId". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:36:51.567 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Tickets_Movies_MovieId". The conflict occurred in database "MoviesDatabase", table "dbo.Movies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:36:51.594 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:36:51.594 +04:00 [INF] Request finished in 90.3823ms 500 text/plain
2022-03-20 20:36:56.785 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 71
2022-03-20 20:36:56.785 +04:00 [DBG] POST requests are not supported
2022-03-20 20:36:56.786 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:36:56.786 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:36:56.786 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:56.786 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:56.787 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:36:56.788 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:36:56.788 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:36:56.788 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:36:56.789 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:36:56.789 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:36:56.790 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:36:56.792 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:36:56.793 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:36:56.793 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:36:56.794 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:36:56.794 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:36:56.795 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:36:56.796 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:56.796 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:56.796 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:36:56.796 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:36:56.799 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:36:56.799 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:36:56.799 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:56.800 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:56.800 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:36:56.803 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:36:56.803 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:36:56.804 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:56.804 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:56.806 +04:00 [DBG] 'MovieContext' generated a temporary value for the property 'Id.Ticket'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:36:56.807 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:36:56.808 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:36:56.808 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:36:56.809 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:36:56.810 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:56.810 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:56.810 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:36:56.811 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:36:56.813 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:36:56.813 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:36:56.813 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 20:36:56.816 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 20:36:56.840 +04:00 [DBG] The foreign key property 'Ticket.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-03-20 20:36:56.848 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:36:56.851 +04:00 [DBG] Committing transaction.
2022-03-20 20:36:56.857 +04:00 [DBG] Committed transaction.
2022-03-20 20:36:56.857 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:56.858 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:36:56.858 +04:00 [DBG] Disposing transaction.
2022-03-20 20:36:56.870 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:36:56.872 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
2022-03-20 20:36:56.881 +04:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-03-20 20:36:56.881 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 91.9971ms
2022-03-20 20:36:56.882 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:36:56.882 +04:00 [INF] HTTP POST /Ticket/Booked responded 200 in 96.3123 ms
2022-03-20 20:36:56.882 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:36:56.883 +04:00 [INF] Request finished in 98.0968ms 200 
2022-03-20 20:38:12.733 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:44376/Movie/1  
2022-03-20 20:38:12.734 +04:00 [DBG] The request path  does not match the path filter
2022-03-20 20:38:12.734 +04:00 [DBG] 1 candidate(s) found for the request path '/Movie/1'
2022-03-20 20:38:12.734 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)' with route pattern 'Movie/{Id}' is valid for the request path '/Movie/1'
2022-03-20 20:38:12.734 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 20:38:12.735 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 20:38:12.743 +04:00 [INF] Route matched with {action = "GetMovieById", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Movies.ItAcademy.Api.Models.DTO.MovieDTO]] GetMovieById(Int32) on controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api).
2022-03-20 20:38:12.743 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:38:12.743 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:38:12.744 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:38:12.744 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:38:12.744 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:38:12.744 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 20:38:12.745 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:38:12.746 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.MovieController (Movies.ItAcademy.Api)
2022-03-20 20:38:12.746 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' ...
2022-03-20 20:38:12.747 +04:00 [DBG] Attempting to bind parameter 'Id' of type 'System.Int32' using the name 'Id' in request data ...
2022-03-20 20:38:12.748 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 20:38:12.748 +04:00 [DBG] Done attempting to bind parameter 'Id' of type 'System.Int32'.
2022-03-20 20:38:12.748 +04:00 [DBG] Attempting to validate the bound parameter 'Id' of type 'System.Int32' ...
2022-03-20 20:38:12.748 +04:00 [DBG] Done attempting to validate the bound parameter 'Id' of type 'System.Int32'.
2022-03-20 20:38:12.760 +04:00 [DBG] Compiling query expression: 
'DbSet<Movie>()
    .Include(x => x.Tickets)
    .SingleOrDefault(x => x.Id == __Id_0)'
2022-03-20 20:38:12.788 +04:00 [DBG] Including navigation: 'Movie.Tickets'.
2022-03-20 20:38:12.913 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Movie>(
    asyncEnumerable: new SingleQueryingEnumerable<Movie>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
            SELECT t.Id, t.Actors, t.Director, t.Duration, t.Genre, t.ImageUrl, t.IsActive, t.Name, t.StartTime, t.Story, t0.Id, t0.IsAcquired, t0.IsBooked, t0.IsCanceled, t0.MovieId
            FROM Projection Mapping:
            (
                SELECT TOP(2) m.Id, m.Actors, m.Director, m.Duration, m.Genre, m.ImageUrl, m.IsActive, m.Name, m.StartTime, m.Story
                FROM Movies AS m
                WHERE m.Id == @__Id_0
            ) AS t
            LEFT JOIN Tickets AS t0 ON t.Id == t0.MovieId
            ORDER BY t.Id ASC, t0.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Movie>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 20:38:12.922 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:38:12.923 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:38:12.923 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:38:12.924 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:38:12.924 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE [m].[Id] = @__Id_0
) AS [t]
LEFT JOIN [Tickets] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 20:38:12.928 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Actors], [t].[Director], [t].[Duration], [t].[Genre], [t].[ImageUrl], [t].[IsActive], [t].[Name], [t].[StartTime], [t].[Story], [t0].[Id], [t0].[IsAcquired], [t0].[IsBooked], [t0].[IsCanceled], [t0].[MovieId]
FROM (
    SELECT TOP(2) [m].[Id], [m].[Actors], [m].[Director], [m].[Duration], [m].[Genre], [m].[ImageUrl], [m].[IsActive], [m].[Name], [m].[StartTime], [m].[Story]
    FROM [Movies] AS [m]
    WHERE [m].[Id] = @__Id_0
) AS [t]
LEFT JOIN [Tickets] AS [t0] ON [t].[Id] = [t0].[MovieId]
ORDER BY [t].[Id], [t0].[Id]
2022-03-20 20:38:12.930 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:38:12.931 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:38:12.931 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:38:12.932 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api) in 188.6625ms
2022-03-20 20:38:12.933 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById (Movies.ItAcademy.Api)'
2022-03-20 20:38:12.933 +04:00 [ERR] HTTP GET /Movie/1 responded 500 in 199.0198 ms
MoviesManagement.Services.Exceptions.ObjectWithThisIdNotFound: Not Found
   at MoviesManagement.Services.Implementations.MovieService.GetByIdAsync(Int32 Id) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\MovieService.cs:line 37
   at Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById(Int32 Id) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\MovieController.cs:line 46
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:38:12.935 +04:00 [ERR] An unhandled exception has occurred while executing the request.
MoviesManagement.Services.Exceptions.ObjectWithThisIdNotFound: Not Found
   at MoviesManagement.Services.Implementations.MovieService.GetByIdAsync(Int32 Id) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\MovieService.cs:line 37
   at Movies.ItAcademy.Api.Controllers.MovieController.GetMovieById(Int32 Id) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\MovieController.cs:line 46
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:38:12.938 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:38:12.939 +04:00 [INF] Request finished in 205.6517ms 500 text/plain
2022-03-20 20:40:24.141 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 78
2022-03-20 20:40:24.141 +04:00 [DBG] POST requests are not supported
2022-03-20 20:40:24.142 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:40:24.142 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:40:24.142 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:40:24.143 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:40:24.144 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:40:24.144 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:40:24.144 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:40:24.144 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:40:24.144 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:40:24.144 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:40:24.144 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:40:24.146 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:40:24.146 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:40:24.147 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:40:24.147 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:40:24.147 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:40:24.151 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:40:24.151 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:40:24.151 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:40:24.151 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:40:24.151 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:40:24.153 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:40:24.153 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:40:24.153 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:24.154 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:24.154 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:40:24.155 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:40:24.156 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:40:24.156 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:24.156 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:24.157 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:40:24.157 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:40:24.157 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:40:24.157 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:40:24.157 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:24.158 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:24.158 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:40:24.159 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:40:24.160 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:40:24.160 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:40:24.160 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:40:24.162 +04:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([Id], [IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2022-03-20 20:40:24.163 +04:00 [DBG] Disposing transaction.
2022-03-20 20:40:24.163 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:24.163 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:24.165 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'MoviesManagement.PersistanceDB.Context.MovieContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-03-20 20:40:24.168 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 23.6478ms
2022-03-20 20:40:24.168 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:40:24.169 +04:00 [ERR] HTTP POST /Ticket/Booked responded 500 in 26.9071 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2022-03-20 20:40:24.177 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'Tickets' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bd609256-d008-474a-8fa9-fa2cb6bae9eb
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at MoviesManagement.Data.EF.Repository.BaseRepository`1.CreateEntityAsync(T entity) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\BaseRepository.cs:line 35
   at MoviesManagement.Data.EF.Repository.TicketRepository.BookedMovieAsync(Ticket ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.DataEF\Repository\TicketRepository.cs:line 39
   at MoviesManagement.Services.Implementations.TicketService.BookedAsync(TicketServiceModel ticket) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\MoviesManagement.Services\Implementations\TicketService.cs:line 30
   at Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket(TickedBookedRequest tickedBooked) in C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api\Controllers\TicketController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-03-20 20:40:24.190 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:40:24.191 +04:00 [INF] Request finished in 49.8734ms 500 text/plain
2022-03-20 20:40:36.761 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 71
2022-03-20 20:40:36.762 +04:00 [DBG] POST requests are not supported
2022-03-20 20:40:36.762 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 20:40:36.763 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 20:40:36.763 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:40:36.763 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:40:36.764 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 20:40:36.764 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 20:40:36.764 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 20:40:36.764 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 20:40:36.764 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 20:40:36.764 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 20:40:36.765 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:40:36.767 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 20:40:36.767 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 20:40:36.768 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:40:36.768 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 20:40:36.769 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 20:40:36.770 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 20:40:36.770 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:40:36.770 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:40:36.770 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 20:40:36.770 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 20:40:36.772 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:40:36.773 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:40:36.773 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:36.774 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:36.774 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:40:36.778 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 20:40:36.779 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:40:36.779 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:36.780 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:36.780 +04:00 [DBG] 'MovieContext' generated a temporary value for the property 'Id.Ticket'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:40:36.781 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:40:36.781 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 20:40:36.782 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 20:40:36.782 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 20:40:36.782 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:36.782 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:36.783 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 20:40:36.783 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 20:40:36.785 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 20:40:36.785 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 20:40:36.785 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 20:40:36.786 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 20:40:36.788 +04:00 [DBG] The foreign key property 'Ticket.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-03-20 20:40:36.789 +04:00 [DBG] A data reader was disposed.
2022-03-20 20:40:36.789 +04:00 [DBG] Committing transaction.
2022-03-20 20:40:36.801 +04:00 [DBG] Committed transaction.
2022-03-20 20:40:36.801 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:36.801 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 20:40:36.802 +04:00 [DBG] Disposing transaction.
2022-03-20 20:40:36.802 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 20:40:36.802 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
2022-03-20 20:40:36.803 +04:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-03-20 20:40:36.803 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 38.4504ms
2022-03-20 20:40:36.803 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 20:40:36.803 +04:00 [INF] HTTP POST /Ticket/Booked responded 200 in 41.1143 ms
2022-03-20 20:40:36.804 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 20:40:36.805 +04:00 [INF] Request finished in 43.1643ms 200 
2022-03-20 21:13:23.648 +04:00 [DBG] Hosting starting
2022-03-20 21:13:24.059 +04:00 [DBG] Loaded hosting startup assembly Movies.ItAcademy.Api
2022-03-20 21:13:24.069 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-03-20 21:13:24.073 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-03-20 21:13:24.074 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-03-20 21:13:24.074 +04:00 [INF] Hosting environment: Development
2022-03-20 21:13:24.074 +04:00 [INF] Content root path: C:\Users\user\source\repos\Movies.ItAcademy.Ge\Movies.ItAcademy.Api
2022-03-20 21:13:24.074 +04:00 [DBG] Hosting started
2022-03-20 21:13:24.106 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger  
2022-03-20 21:13:24.149 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-03-20 21:13:24.195 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/index.html  
2022-03-20 21:13:24.202 +04:00 [INF] Request finished in 102.9408ms 301 
2022-03-20 21:13:24.229 +04:00 [DBG] Connection ID "18230571310386250357" disconnecting.
2022-03-20 21:13:24.292 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-03-20 21:13:24.474 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-03-20 21:13:24.477 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-bundle.js  
2022-03-20 21:13:24.478 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui-standalone-preset.js  
2022-03-20 21:13:24.477 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/swagger-ui.css  
2022-03-20 21:13:24.477 +04:00 [INF] Request finished in 281.9812ms 200 text/html;charset=utf-8
2022-03-20 21:13:24.552 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 78
2022-03-20 21:13:24.555 +04:00 [DBG] POST requests are not supported
2022-03-20 21:13:24.561 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2022-03-20 21:13:24.561 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2022-03-20 21:13:24.561 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2022-03-20 21:13:24.561 +04:00 [INF] Request finished in 83.1526ms 200 application/javascript
2022-03-20 21:13:24.561 +04:00 [INF] Request finished in 84.2864ms 200 text/css
2022-03-20 21:13:24.561 +04:00 [INF] Request finished in 84.3179ms 200 application/javascript
2022-03-20 21:13:24.593 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/_framework/aspnetcore-browser-refresh.js  
2022-03-20 21:13:24.593 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 21:13:24.596 +04:00 [INF] Request finished in 2.6858ms 200 application/javascript; charset=utf-8
2022-03-20 21:13:24.603 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 21:13:24.604 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 21:13:24.609 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 21:13:24.621 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider"]
2022-03-20 21:13:24.669 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 21:13:24.670 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 21:13:24.670 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 21:13:24.671 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 21:13:24.671 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 21:13:24.671 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 21:13:24.672 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 21:13:24.826 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-03-20 21:13:24.826 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/favicon-32x32.png  
2022-03-20 21:13:24.827 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2022-03-20 21:13:24.827 +04:00 [INF] Request finished in 0.9718ms 200 image/png
2022-03-20 21:13:25.084 +04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44376/swagger/v1/swagger.json  
2022-03-20 21:13:25.208 +04:00 [INF] Request finished in 124.6187ms 200 application/json;charset=utf-8
2022-03-20 21:13:25.664 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 21:13:25.665 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 21:13:25.670 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 21:13:25.672 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 21:13:25.672 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 21:13:25.679 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 21:13:25.679 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:13:25.679 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:13:25.679 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 21:13:25.683 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:13:34.508 +04:00 [DBG] Compiling query expression: 
'DbSet<Ticket>()
    .Any(x => x.Id == __Id_0)'
2022-03-20 21:13:34.691 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                Projection Mapping:
                SELECT 1
                FROM Tickets AS t
                WHERE t.Id == @__Id_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        MoviesManagement.PersistanceDB.Context.MovieContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-03-20 21:13:34.758 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 21:13:34.809 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (46ms).
2022-03-20 21:13:34.849 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:13:36.519 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:13:36.534 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 21:13:36.601 +04:00 [INF] Executed DbCommand (71ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 21:13:36.634 +04:00 [DBG] A data reader was disposed.
2022-03-20 21:13:36.641 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:13:36.651 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:13:43.488 +04:00 [DBG] 'MovieContext' generated a temporary value for the property 'Id.Ticket'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 21:13:43.588 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 21:13:46.164 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 21:13:46.169 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 21:13:46.185 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 21:13:46.210 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:13:46.212 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:13:46.215 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 21:13:46.225 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 21:13:46.300 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 21:13:46.300 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 21:13:46.303 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 21:13:46.312 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Tickets] ([IsAcquired], [IsBooked], [IsCanceled], [MovieId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Tickets]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-03-20 21:13:46.473 +04:00 [DBG] The foreign key property 'Ticket.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-03-20 21:13:46.480 +04:00 [DBG] A data reader was disposed.
2022-03-20 21:13:46.483 +04:00 [DBG] Committing transaction.
2022-03-20 21:13:46.498 +04:00 [DBG] Committed transaction.
2022-03-20 21:13:46.500 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:13:46.501 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:13:46.503 +04:00 [DBG] Disposing transaction.
2022-03-20 21:13:46.516 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 21:13:46.518 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
2022-03-20 21:13:54.815 +04:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-03-20 21:13:54.822 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 30145.4864ms
2022-03-20 21:13:54.824 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 21:13:54.829 +04:00 [INF] HTTP POST /Ticket/Booked responded 200 in 30270.5469 ms
2022-03-20 21:13:54.832 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 21:13:54.836 +04:00 [INF] Request finished in 30290.7196ms 200 
2022-03-20 21:14:47.555 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 78
2022-03-20 21:14:47.557 +04:00 [DBG] POST requests are not supported
2022-03-20 21:14:47.561 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 21:14:47.561 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 21:14:47.562 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 21:14:47.564 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 21:14:47.568 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 21:14:47.569 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 21:14:47.569 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 21:14:47.569 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 21:14:47.569 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 21:14:47.569 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 21:14:47.569 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 21:14:47.603 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 21:14:47.603 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 21:14:47.606 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 21:14:47.611 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 21:14:47.612 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 21:14:47.613 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 21:14:47.613 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:14:47.613 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:14:47.613 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 21:14:47.614 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:14:57.897 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 21:14:57.898 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-03-20 21:14:57.898 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:14:57.899 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:14:57.899 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 21:14:57.921 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 21:14:57.923 +04:00 [DBG] A data reader was disposed.
2022-03-20 21:14:57.939 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:14:57.941 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:02.288 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 21:15:02.883 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 21:15:02.884 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 21:15:02.884 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 21:15:02.885 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:02.886 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:02.887 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 21:15:02.888 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 21:15:02.902 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 21:15:02.902 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 21:15:02.903 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 21:15:02.936 +04:00 [INF] Executed DbCommand (33ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 21:15:03.026 +04:00 [DBG] A data reader was disposed.
2022-03-20 21:15:03.027 +04:00 [DBG] Committing transaction.
2022-03-20 21:15:03.061 +04:00 [DBG] Committed transaction.
2022-03-20 21:15:03.062 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:03.063 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:03.064 +04:00 [DBG] Disposing transaction.
2022-03-20 21:15:03.066 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 21:15:03.066 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
2022-03-20 21:15:08.518 +04:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-03-20 21:15:08.519 +04:00 [INF] Executed action Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api) in 20950.329ms
2022-03-20 21:15:08.521 +04:00 [INF] Executed endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 21:15:08.522 +04:00 [INF] HTTP POST /Ticket/Booked responded 200 in 20963.6963 ms
2022-03-20 21:15:08.523 +04:00 [DBG] 'MovieContext' disposed.
2022-03-20 21:15:08.526 +04:00 [INF] Request finished in 20977.0047ms 200 
2022-03-20 21:15:33.743 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:44376/Ticket/Booked application/json 79
2022-03-20 21:15:33.750 +04:00 [DBG] POST requests are not supported
2022-03-20 21:15:33.751 +04:00 [DBG] 1 candidate(s) found for the request path '/Ticket/Booked'
2022-03-20 21:15:33.752 +04:00 [DBG] Endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)' with route pattern 'Ticket/Booked' is valid for the request path '/Ticket/Booked'
2022-03-20 21:15:33.753 +04:00 [DBG] Request matched endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 21:15:33.755 +04:00 [INF] Executing endpoint 'Movies.ItAcademy.Api.Controllers.TicketController.BooketTicket (Movies.ItAcademy.Api)'
2022-03-20 21:15:33.756 +04:00 [INF] Route matched with {action = "BooketTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BooketTicket(Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest) on controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api).
2022-03-20 21:15:33.757 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-03-20 21:15:33.759 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-03-20 21:15:33.760 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-03-20 21:15:33.761 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-03-20 21:15:33.761 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-03-20 21:15:33.762 +04:00 [DBG] Executing controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 21:15:33.782 +04:00 [INF] Entity Framework Core 5.0.15 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-03-20 21:15:33.784 +04:00 [DBG] Executed controller factory for controller Movies.ItAcademy.Api.Controllers.TicketController (Movies.ItAcademy.Api)
2022-03-20 21:15:33.785 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 21:15:33.786 +04:00 [DBG] Attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' using the name '' in request data ...
2022-03-20 21:15:33.786 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-03-20 21:15:33.788 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'
2022-03-20 21:15:33.788 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:15:33.788 +04:00 [DBG] Done attempting to bind parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:15:33.788 +04:00 [DBG] Attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest' ...
2022-03-20 21:15:33.788 +04:00 [DBG] Done attempting to validate the bound parameter 'tickedBooked' of type 'Movies.ItAcademy.Api.Models.Requests.TickedBookedRequest'.
2022-03-20 21:15:40.437 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 21:15:40.437 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 21:15:40.437 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:40.438 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:40.438 +04:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 21:15:40.471 +04:00 [INF] Executed DbCommand (31ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Tickets] AS [t]
        WHERE [t].[Id] = @__Id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2022-03-20 21:15:40.491 +04:00 [DBG] A data reader was disposed.
2022-03-20 21:15:40.491 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:40.515 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:43.285 +04:00 [DBG] Context 'MovieContext' started tracking 'Ticket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 21:15:43.808 +04:00 [DBG] SaveChanges starting for 'MovieContext'.
2022-03-20 21:15:43.808 +04:00 [DBG] DetectChanges starting for 'MovieContext'.
2022-03-20 21:15:43.809 +04:00 [DBG] DetectChanges completed for 'MovieContext'.
2022-03-20 21:15:43.810 +04:00 [DBG] Opening connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:43.811 +04:00 [DBG] Opened connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:43.812 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-03-20 21:15:43.812 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-03-20 21:15:43.814 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-03-20 21:15:43.814 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-03-20 21:15:43.815 +04:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 21:15:43.843 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Tickets] SET [IsAcquired] = @p0, [IsBooked] = @p1, [IsCanceled] = @p2, [MovieId] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-03-20 21:15:43.846 +04:00 [DBG] A data reader was disposed.
2022-03-20 21:15:43.869 +04:00 [DBG] Committing transaction.
2022-03-20 21:15:43.896 +04:00 [DBG] Committed transaction.
2022-03-20 21:15:43.898 +04:00 [DBG] Closing connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:43.917 +04:00 [DBG] Closed connection to database 'MoviesDatabase' on server '(localdb)\MSSQLLocalDB'.
2022-03-20 21:15:43.919 +04:00 [DBG] Disposing transaction.
2022-03-20 21:15:43.943 +04:00 [DBG] An entity of type 'Ticket' tracked by 'MovieContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-03-20 21:15:43.973 +04:00 [DBG] SaveChanges completed for 'MovieContext' with 1 entities written to the database.
